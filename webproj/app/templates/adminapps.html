{% extends "base.html" %}

{% load  static %}
{% block content %}
    <head xmlns="http://www.w3.org/1999/html">
    <link rel="stylesheet" href="{% static "css/clientdetails.css" %}">
    </head>
    <body>
    <div class="container light-style flex-grow-1 container-p-y" style="max-width: 1500px">
     {% if  success is not None %}
       <div class="alert alert-success" role="alert">
            {{ success }}
        </div>
    {% endif %}
    <h4 class="font-weight-bold py-3 mb-4">
      Admin settings
    </h4>


    <div class="card overflow-hidden">
      <div class="row no-gutters row-bordered row-border-light">
        <div class="col-md-2 pt-0">
          <div class="list-group list-group-flush account-settings-links">
            <a class="list-group-item list-group-item-action" href="/admin/purchases/">Purchases</a>
              <a class="list-group-item list-group-item-action" href="/admin/users/">Users</a>
              <a class="list-group-item list-group-item-action active" href="/admin/apps/">Applications</a>
            <a class="list-group-item list-group-item-action"  href="/account/">Account</a>
          </div>
        </div>
        <div class="col-md-10">
          <div class="tab-content">
             <div class="tab-pane" id="admin-purchases" style="display: block">
                 <div class="card-body pb-2">
                   <table class="table" width="100%" align="center">
                     <thead  style="background-color: black; border: 0; color: white;">
                       <tr>
                         <th scope="col">Icon</th>
                         <th scope="col">Name</th>
                         <th scope="col">Category</th><th scope="col" >Edit</th>
                       </tr>
                     </thead>
                     <tbody>
                       {% for p in products %}
                           <tr>
                             <td scope="row"><div class="product__item__pic set-bg" style="width:50px; height:50px;" data-setbg="{{ p.icon }}"></div></td>
                             <td>{{ p.name }}</td>
                             <td>
                                 {% for c in p.category.all %}
                                     {{ c  }}
                                 {% endfor %}

                             </td>

                             <td align="center"><a href="#"  onclick="get_prod('{{p.id}}', '{{ p.name }}' , '{{ p.icon }}', '{{ p.description }}' )" data-toggle="modal" data-target="#modalEditForm" style="width: 50%;" class="site-btn">Edit </a></td>
                           </tr>
                       {% endfor %}
                     </tbody>
                   </table>
                 </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

     <br>
     <br>
     <br>



<!-- The Modal -->

<div class="modal" id="modalEditForm">
  <div class="modal-dialog">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Edit Product</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
         <form id="myForm" name="myFormName" method="post" action=".">

      <div class="modal-body">
        Edit here this product data
      <br>
      <br>
            {% csrf_token %}
            {% for field in form %}

                {% if field.name == 'prod' %}
                    {{ field.as_hidden }}
               {% else %}
                      <p>
                        {{ field.label_tag }}<br>
                        {{ field }}
                        {% for error in field.errors %}
                          <p style="color: red">{{ error }}</p>
                        {% endfor %}
                      </p>
                {% endif %}
            {% endfor %}

      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="site-btn" data-dismiss="modal">Cancel</button>
       <button type="button"  onclick="proceed_edit()" class="site-btn" data-dismiss="modal">Confirm Purchase</button>
      </div>
    </form>

        </div>
      </div>
    </div>
    {% block javascript %}

        <script>
        function  get_prod(id,name,icon,description){
            prodid=id
            $("#id_prod").val(id)
            $("#id_name").val(name)
            $("#id_icon").val(icon)
            $("#id_description").val(description)
        }
        function proceed_edit(){
            $("#myForm").submit()
        }

    </script>
    {% endblock %}
    </body>
{% endblock %}







